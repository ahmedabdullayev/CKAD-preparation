## Question 12

## Env setup

mkdir -p Volumes/Data

mkdir -p tmp/project-data

kubectl create ns earth

## Solution
1. create pv, search examples of PersistentVolume in kubernetes official doc

```
apiVersion: v1
kind: PersistentVolume
metadata:
  name: earth-project-earthflower-pv 
spec:
  capacity:
    storage: 2Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /Volumes/Data
```

```
kubectl apply -f earth-project-earthflower-pv.yaml
```

2. create pvc, dont forget about storageClassName: ""

```
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: earth-project-earthflower-pvc
  namespace: earth
spec:
  accessModes:
    - ReadWriteOnce
  volumeMode: Filesystem
  resources:
    requests:
      storage: 2Gi
  storageClassName: ""
```

```
kubectl apply -f earth-project-earthflower-pvc.yaml
```

3. create deployment

```
kubectl create deployment project-earthflower -n earth --image=httpd:latest -o yaml --dry-run=client > deployment.yaml
```

4. edit deployment.yaml, add volumes: and volumeMounts:
```
spec:
      containers:
      - image: httpd:latest
        name: httpd
        volumeMounts:
          - name: data
            mountPath: /tmp/project-data
      volumes:
        - name: data
          persistentVolumeClaim:
            claimName: earth-project-earthflower-pvc
```

